{"version":3,"sources":["pages/Home.jsx","services/Autorizations.js","pages/Autorisation/ModalWindow.js","pages/Autorisation/index.jsx","App.js","routes.js","reducers/index.js","reducers/Autorization.js","index.js"],"names":["Home","useState","currentMessage","setCurrentMessage","messages","setMessages","dispatch","useDispatch","addMessage","a","body","JSON","stringify","message","fetch","method","headers","response","json","data","console","log","getAllMessage","requets","useEffect","deleteMessage","id","onClick","type","placeholder","value","onChange","e","target","length","map","item","_id","onRegistration","credentials","onLogin","ModalWindow","props","isShowModal","onClose","bodyMessage","className","Autorisation","success","registrationStatus","setregistrationStatus","loginStatus","setLoginStatus","login","password","formValue","setFormValue","logIn","Registrations","onInputChange","name","App","routes","isAutorizationed","path","exact","to","Routes","useSelector","store","combineReducers","state","action","createStore","reducers","window","__REDUX_DEVTOOLS_EXTENSION__","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.cfa0a64d.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nexport const Home = () => {\r\n  const [currentMessage, setCurrentMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);  \r\n  const dispatch = useDispatch()\r\n  const addMessage = async () => {\r\n    if (currentMessage) {\r\n      const method = 'POST'\r\n      const body = JSON.stringify({message: currentMessage})\r\n      const response = await fetch(\r\n        '/api/home',\r\n        {\r\n          method,\r\n          body,\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n        }\r\n      )\r\n      const data = await response.json();\r\n      console.log(\"data \", data)\r\n      getAllMessage()\r\n      setCurrentMessage('');\r\n    }\r\n  }\r\n\r\n  const getAllMessage = async () => {\r\n    const method = 'GET'\r\n    const requets = await fetch('/api/getAllMessages', {method})\r\n    const data = await requets.json()\r\n    setMessages(data)\r\n  }\r\n\r\n  useEffect(() => {\r\n    getAllMessage()\r\n  }, [])\r\n\r\n  const refreshCurrentMessage = (e) => {\r\n    setCurrentMessage(e.target.value)\r\n  }\r\n\r\n  const deleteMessage = async (id) => {\r\n    const method = 'DELETE'\r\n    const body = JSON.stringify({id})\r\n    const requets = await fetch(\r\n      '/api/deleteMessage',\r\n      {\r\n        method,\r\n        body,\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n      }\r\n    )\r\n    const data = await requets.json()\r\n    getAllMessage()\r\n    console.log(data)\r\n  }\r\n\r\n  const logOut = () => {\r\n    dispatch({ type: 'logOut'})\r\n  }\r\n\r\n  return(\r\n    <div>\r\n      Home\r\n      <button onClick={logOut}>logOut</button>\r\n      <input placeholder='Your message' value={currentMessage} onChange={refreshCurrentMessage} />\r\n      <button onClick={addMessage}>Sent</button>\r\n      {\r\n        messages.length ? (\r\n          messages.map( item => (\r\n            <div key={item._id}>\r\n              <div>{item.message}</div>\r\n              <button onClick={() => deleteMessage(item._id)}>X</button>\r\n            </div>\r\n          ))\r\n        ): null\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n","export const onRegistration = async (credentials) => {\r\n  const body = JSON.stringify(credentials);\r\n  const method = 'POST';\r\n  \r\n  const response = await fetch(\r\n    'api/registrations',\r\n    {\r\n      method,\r\n      body,\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }\r\n    }\r\n  )\r\n  const data = await response.json()\r\n  return data;\r\n}\r\n\r\nexport const onLogin = async (credentials) => {\r\n  const body = JSON.stringify(credentials);\r\n  const method = 'POST';\r\n  const response = await fetch(\r\n    'api/login',\r\n    {\r\n      method,\r\n      body,\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }\r\n    }\r\n  )\r\n  const data = await response.json()\r\n  return data;\r\n}","import React from 'react'\r\n\r\nexport const ModalWindow = (props) => {\r\n  const { isShowModal, onClose, bodyMessage } = props\r\n  return (\r\n    <>\r\n    {\r\n      isShowModal ?\r\n      <div className='modal-success-registrations'>\r\n        <div className='modal-window-header'>\r\n          <div className='modal-window-title'>\r\n            Information\r\n          </div>\r\n          <button className='close-modal-window' onClick={onClose}>\r\n            X\r\n          </button>\r\n        </div>\r\n        <div className='modal-window-body'>\r\n          <h2>{bodyMessage}</h2>\r\n        </div>\r\n      </div> : null\r\n    }\r\n  </>\r\n  )\r\n}","import React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { onRegistration, onLogin } from '../../services/Autorizations'\r\nimport { ModalWindow } from './ModalWindow'\r\n\r\nexport const Autorisation = () => {\r\n  const [registrationStatus, setregistrationStatus] = useState({\r\n    message:'',\r\n    success: false,\r\n    isShowModal: false\r\n  })\r\n  const [loginStatus, setLoginStatus] = useState({\r\n    message:'',\r\n    success: false,\r\n    isShowModal: false\r\n  })\r\n  const [formValue, setFormValue] = useState({\r\n    login:'',\r\n    password:''\r\n  })\r\n  const dispatch = useDispatch()\r\n\r\n  const logIn = async () => {\r\n    if (formValue.login && formValue.password) {\r\n      const loginStatus = await onLogin(formValue)\r\n      console.log('loginStatus ', loginStatus)\r\n      if(!loginStatus.success) {\r\n        setLoginStatus({message: loginStatus.message, success: loginStatus.success, isShowModal: true})\r\n        return\r\n      }\r\n      dispatch({ type: 'logIn' })\r\n    }\r\n  }\r\n\r\n  const Registrations = async () => {\r\n    if (formValue.login && formValue.password) {\r\n      const registrationStatus = await onRegistration(formValue)\r\n      setregistrationStatus({message: registrationStatus.message, success: registrationStatus.success, isShowModal: true})\r\n    }\r\n  }\r\n\r\n  const onInputChange = (e) => {\r\n    setFormValue({...formValue, [e.target.name]: e.target.value})\r\n  }\r\n\r\n  const onCloseLoginModal = () => {\r\n    setLoginStatus({...loginStatus, isShowModal: false})\r\n  }\r\n\r\n  const onCloseRegistrationModal = () => {\r\n    setregistrationStatus({...loginStatus, isShowModal: false})\r\n  }\r\n\r\n  return(\r\n    <div className=\"autorization\">\r\n      <input placeholder='login' name='login' onChange={onInputChange}/>\r\n      <input placeholder='password' name='password' onChange={onInputChange}/>\r\n      <div className='autorization-buttons'>\r\n        <button onClick={logIn}>logIn</button>\r\n        <button onClick={Registrations}>Registrations</button>\r\n      </div>\r\n      <ModalWindow \r\n        isShowModal={loginStatus.isShowModal}\r\n        bodyMessage={loginStatus.message}\r\n        onClose={onCloseLoginModal}\r\n      />\r\n      <ModalWindow \r\n        isShowModal={registrationStatus.isShowModal}\r\n        bodyMessage={registrationStatus.message}\r\n        onClose={onCloseRegistrationModal}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\nimport { Routes } from './routes'\nimport { useSelector } from 'react-redux'\n\nfunction App() {\n  const isAutorizationed = useSelector( store => store.isAutorizationed)\n  const routes = Routes(isAutorizationed)\n\n  return (\n    <div>\n        {routes}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react'\r\nimport { Switch ,Route, Redirect, BrowserRouter as Router } from 'react-router-dom'\r\nimport { Home } from './pages/Home'\r\nimport { Autorisation } from './pages/Autorisation'\r\n\r\nexport const Routes = ({isAutorizationed}) => {\r\n  console.log(\"isAuthenticated \", isAutorizationed)\r\n  return (\r\n    <>\r\n    {\r\n      isAutorizationed?\r\n      <>\r\n        <Router>\r\n          <Switch>\r\n            <Route path=\"/home\" exact>\r\n              <Home/>\r\n            </Route>\r\n          </Switch>\r\n          <Redirect to='/home'/>\r\n        </Router>\r\n      </>\r\n      :\r\n      <>\r\n        <Router>\r\n          <Switch>\r\n            <Route path=\"/\" exact>\r\n              <Autorisation/>\r\n            </Route>\r\n          </Switch>\r\n          <Redirect to='/'/>\r\n        </Router>\r\n      </>\r\n    }\r\n    </>\r\n  )\r\n}","import { combineReducers } from 'redux';\r\n\r\nimport { isAutorizationed } from './Autorization';\r\n\r\nexport default combineReducers({\r\n  isAutorizationed,\r\n});","/* eslint-disable no-unused-expressions */\r\n\r\nexport const isAutorizationed = (state = { isAutorizationed: false }, action) => {\r\n    console.log('check is working')\r\n    console.log(action)\r\n    switch(action.type) {\r\n        case 'logIn': {\r\n            return {...state, isAutorizationed: true}\r\n        }\r\n        case 'logOut': {\r\n            return {...state, isAutorizationed: false}\r\n        }\r\n        default:\r\n            state;\r\n    }\r\n    return state;\r\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux'\nimport reducers from './reducers'\n\nconst store = createStore(reducers, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\nconst rootElement = document.getElementById('root')\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n)"],"sourceRoot":""}