(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(15),c=n.n(a),r=n(19),o=n(3),i=n(4),u=n.n(i),l=n(10),j=n(12),d=n(11),b=n(1),O=function(){var e=Object(s.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)([]),r=Object(j.a)(c,2),o=r[0],i=r[1],O=Object(d.b)(),h=function(){var e=Object(l.a)(u.a.mark((function e(){var t,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}return"POST",t=JSON.stringify({message:n}),e.next=5,fetch("/api/home",{method:"POST",body:t,headers:{"Content-Type":"application/json"}});case 5:return s=e.sent,e.next=8,s.json();case 8:c=e.sent,console.log("data ",c),p(),a("");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"GET",e.next=3,fetch("/api/getAllMessages",{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,i(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){p()}),[]);var f=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"DELETE",n=JSON.stringify({id:t}),e.next=4,fetch("/api/deleteMessage",{method:"DELETE",body:n,headers:{"Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:a=e.sent,p(),console.log(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:["Home",Object(b.jsx)("button",{onClick:function(){O({type:"logOut"})},children:"logOut"}),Object(b.jsx)("input",{placeholder:"Your message",value:n,onChange:function(e){a(e.target.value)}}),Object(b.jsx)("button",{onClick:h,children:"Sent"}),o.length?o.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:e.message}),Object(b.jsx)("button",{onClick:function(){return f(e._id)},children:"X"})]},e._id)})):null]})},h=n(16),p=n(8),f=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),"POST",e.next=4,fetch("api/registrations",{method:"POST",body:n,headers:{"Content-type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),"POST",e.next=4,fetch("api/login",{method:"POST",body:n,headers:{"Content-type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.isShowModal,n=e.onClose,s=e.bodyMessage;return Object(b.jsx)(b.Fragment,{children:t?Object(b.jsxs)("div",{className:"modal-success-registrations",children:[Object(b.jsxs)("div",{className:"modal-window-header",children:[Object(b.jsx)("div",{className:"modal-window-title",children:"Information"}),Object(b.jsx)("button",{className:"close-modal-window",onClick:n,children:"X"})]}),Object(b.jsx)("div",{className:"modal-window-body",children:Object(b.jsx)("h2",{children:s})})]}):null})},m=function(){var e=Object(s.useState)({message:"",success:!1,isShowModal:!1}),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)({message:"",success:!1,isShowModal:!1}),r=Object(j.a)(c,2),o=r[0],i=r[1],O=Object(s.useState)({login:"",password:""}),m=Object(j.a)(O,2),w=m[0],v=m[1],S=Object(d.b)(),y=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.login||!w.password){e.next=9;break}return e.next=3,x(w);case 3:if(t=e.sent,console.log("loginStatus ",t),t.success){e.next=8;break}return i({message:t.message,success:t.success,isShowModal:!0}),e.abrupt("return");case 8:S({type:"logIn"});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.login||!w.password){e.next=5;break}return e.next=3,f(w);case 3:t=e.sent,a({message:t.message,success:t.success,isShowModal:!0});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){v(Object(p.a)(Object(p.a)({},w),{},Object(h.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"autorization",children:[Object(b.jsx)("input",{placeholder:"login",name:"login",onChange:E}),Object(b.jsx)("input",{placeholder:"password",name:"password",onChange:E}),Object(b.jsxs)("div",{className:"autorization-buttons",children:[Object(b.jsx)("button",{onClick:y,children:"logIn"}),Object(b.jsx)("button",{onClick:k,children:"Registrations"})]}),Object(b.jsx)(g,{isShowModal:o.isShowModal,bodyMessage:o.message,onClose:function(){i(Object(p.a)(Object(p.a)({},o),{},{isShowModal:!1}))}}),Object(b.jsx)(g,{isShowModal:n.isShowModal,bodyMessage:n.message,onClose:function(){a(Object(p.a)(Object(p.a)({},o),{},{isShowModal:!1}))}})]})};var w=function(){var e=function(e){var t=e.isAutorizationed;return console.log("isAuthenticated ",t),Object(b.jsx)(b.Fragment,{children:t?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(r.a,{children:[Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{path:"/home",exact:!0,children:Object(b.jsx)(O,{})})}),Object(b.jsx)(o.a,{to:"/home"})]})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(r.a,{children:[Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{path:"/",exact:!0,children:Object(b.jsx)(m,{})})}),Object(b.jsx)(o.a,{to:"/"})]})})})}(Object(d.c)((function(e){return e.isAutorizationed})));return Object(b.jsx)("div",{children:e})},v=n(17),S=Object(v.a)({isAutorizationed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAutorizationed:!1},t=arguments.length>1?arguments[1]:void 0;switch(console.log("check is working"),console.log(t),t.type){case"logIn":return Object(p.a)(Object(p.a)({},e),{},{isAutorizationed:!0});case"logOut":return Object(p.a)(Object(p.a)({},e),{},{isAutorizationed:!1})}return e}}),y=Object(v.b)(S,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),k=document.getElementById("root");c.a.render(Object(b.jsx)(d.a,{store:y,children:Object(b.jsx)(w,{})}),k)}},[[39,1,2]]]);
//# sourceMappingURL=main.cfa0a64d.chunk.js.map